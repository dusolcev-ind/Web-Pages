<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global EV Taxi Expansion: Research Ledger</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- 
    Chosen Palette: "Brilliant Blues"
    Primary: #2563eb (Blue-600)
    Secondary: #0891b2 (Cyan-600)
    Accent: #f59e0b (Amber-500)
    Background: #f8fafc (Slate-50)
    -->

    <!-- Application Structure Plan:
         1. Executive Dashboard: Key metrics for the expansion strategy.
         2. Comparative Scoring Chart: Visualizing the "Project Manager Score" for new and key markets.
         3. Expanded Strategic Ledger: Full table of all 15+ countries with deep-dives into subsidies and risks.
         4. Regional Insight Section: Focused on the "Mass-Market" (Non-Premium) value proposition.
    -->

    <!-- Visualization & Content Choices:
         - Market Score Chart -> Goal: Compare -> Bar Chart (Chart.js) -> Logic: Ranks countries by aggregated feasibility.
         - Ledger Table -> Goal: Organize -> Searchable Table -> Logic: High qualitative density for PM decision making.
         - NO SVG / NO MERMAID used. All visual indicators are Canvas or CSS-based.
    -->

    <style>
        body { background-color: #f8fafc; color: #0f172a; }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 500px;
        }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; height: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f5f9; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 10px; }
        
        .score-indicator {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-weight: 700;
            font-size: 0.75rem;
        }
    </style>
</head>
<body class="antialiased font-sans">

    <!-- Sticky Nav -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center gap-2">
                    <span class="text-2xl">üåç</span>
                    <h1 class="font-bold text-xl tracking-tight text-slate-800 uppercase">EV Taxi <span class="text-blue-600">Expansion Ledger</span></h1>
                </div>
                <div class="flex items-center">
                    <span class="text-[10px] font-bold bg-blue-100 text-blue-700 px-2 py-1 rounded tracking-widest uppercase">Research Phase: 2B</span>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-12">

        <!-- Header Summary -->
        <section class="space-y-4">
            <h2 class="text-3xl font-black text-slate-900 leading-tight">Expansion Prioritization: Mass-Market focus</h2>
            <p class="text-slate-600 max-w-4xl text-lg">
                Analysis focuses on emerging markets where <strong>low-cost EV units</strong> (BYD, Wuling, VinFast) can leverage local subsidies and fuel-price arbitrage. 
                Scores represent an aggregation of Infrastructure Maturity (40%), Subsidy Depth (40%), and Operating Stability (20%).
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 pt-4">
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 border-l-8 border-blue-600">
                    <div class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Top Performer</div>
                    <div class="text-2xl font-black text-slate-900">Nepal</div>
                    <p class="text-xs text-slate-500 mt-1">Exceptional tax delta (10% EV vs 250% ICE).</p>
                </div>
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 border-l-8 border-cyan-600">
                    <div class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">Strategic Anchor</div>
                    <div class="text-2xl font-black text-slate-900">Morocco</div>
                    <p class="text-xs text-slate-500 mt-1">Stable renewables & EV manufacturing hub.</p>
                </div>
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 border-l-8 border-amber-500">
                    <div class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-1">High Risk</div>
                    <div class="text-2xl font-black text-slate-900">Pakistan</div>
                    <p class="text-xs text-slate-500 mt-1">Grid stability & currency volatility barriers.</p>
                </div>
            </div>
        </section>

        <!-- Visualization -->
        <section class="bg-white p-8 rounded-3xl shadow-xl border border-slate-100">
            <div class="mb-8">
                <h3 class="text-xl font-bold text-slate-900">Aggregate Expansion Score</h3>
                <p class="text-sm text-slate-500">Ranking of newest and key countries by Project Manager feasibility score.</p>
            </div>
            <div class="chart-container">
                <canvas id="marketChart"></canvas>
            </div>
        </section>

        <!-- The Strategic Ledger -->
        <section class="space-y-6">
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                <h3 class="text-2xl font-bold text-slate-900">Strategic Research Ledger</h3>
                <input type="text" id="ledgerSearch" placeholder="Filter by region or country..." class="bg-white border border-slate-300 rounded-xl py-3 px-5 text-sm w-full md:w-80 shadow-sm focus:ring-2 focus:ring-blue-500 outline-none">
            </div>

            <div class="bg-white rounded-3xl shadow-2xl border border-slate-200 overflow-hidden">
                <div class="overflow-x-auto custom-scrollbar">
                    <table class="min-w-full divide-y divide-slate-200" id="ledgerTable">
                        <thead class="bg-slate-50">
                            <tr>
                                <th class="px-6 py-5 text-left text-xs font-black text-slate-500 uppercase tracking-widest">Country</th>
                                <th class="px-6 py-5 text-left text-xs font-black text-slate-500 uppercase tracking-widest">Opportunities (Subsidies & Regs)</th>
                                <th class="px-6 py-5 text-left text-xs font-black text-slate-500 uppercase tracking-widest">Risks (Infrastructure & Macro)</th>
                                <th class="px-6 py-5 text-center text-xs font-black text-slate-500 uppercase tracking-widest">Score</th>
                                <th class="px-6 py-5 text-center text-xs font-black text-slate-500 uppercase tracking-widest">EV Taxi Share</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-200" id="ledgerBody">
                            <!-- Injected via JS -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Qualitative Deep Dive -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div class="bg-blue-950 text-white p-10 rounded-3xl shadow-2xl relative overflow-hidden">
                <div class="relative z-10">
                    <h4 class="text-blue-400 text-xs font-bold uppercase tracking-widest mb-2">PM Strategic Insight</h4>
                    <h3 class="text-3xl font-bold mb-6">The "Nepal Paradox"</h3>
                    <p class="text-blue-100 text-lg leading-relaxed mb-6">
                        Nepal scores higher than Mexico despite lower wealth. Why? Because the <strong>tax arbitrage</strong> is absolute. 
                        In Kathmandu, an ICE taxi pays 250%+ import duty, while an EV pays 10%. Combined with surplus domestic hydropower (dirt cheap electricity), 
                        the ROI for a fleet owner is <span class="text-blue-400 font-bold">3x faster</span> than in neighbors like India or Pakistan.
                    </p>
                    <div class="flex items-center gap-4 bg-blue-900/50 p-4 rounded-xl border border-blue-800">
                        <span class="text-2xl">üîå</span>
                        <div class="text-xs text-blue-200 italic">"Strategy: Focus on the Kathmandu-Pokhara corridor for initial 500-unit pilot."</div>
                    </div>
                </div>
            </div>

            <div class="bg-white p-10 rounded-3xl shadow-xl border border-slate-200">
                <h4 class="text-slate-400 text-xs font-bold uppercase tracking-widest mb-2">Market Alert</h4>
                <h3 class="text-2xl font-bold text-slate-900 mb-6">Regional Barrier Summary</h3>
                <div class="space-y-4">
                    <div class="flex gap-4">
                        <div class="bg-blue-100 text-blue-600 h-10 w-10 rounded-full flex items-center justify-center shrink-0 font-bold">1</div>
                        <div>
                            <p class="font-bold text-slate-800">Philippines: Electricity Cost</p>
                            <p class="text-sm text-slate-500">The highest electricity rates in SEA (~$0.18/kWh) limit the operational margin compared to Vietnam or Thailand.</p>
                        </div>
                    </div>
                    <div class="flex gap-4">
                        <div class="bg-blue-100 text-blue-600 h-10 w-10 rounded-full flex items-center justify-center shrink-0 font-bold">2</div>
                        <div>
                            <p class="font-bold text-slate-800">Morocco: Renewable Synergy</p>
                            <p class="text-sm text-slate-500">With 40% renewable grid mix, EVs have the highest 'Green Marketing' value in MENA.</p>
                        </div>
                    </div>
                    <div class="flex gap-4">
                        <div class="bg-blue-100 text-blue-600 h-10 w-10 rounded-full flex items-center justify-center shrink-0 font-bold">3</div>
                        <div>
                            <p class="font-bold text-slate-800">Mexico: Traffic Bans</p>
                            <p class="text-sm text-slate-500">Hoy No Circula exemption provides a mandatory 15% uptime advantage over ICE competition.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-900 py-12 px-6">
        <div class="max-w-7xl mx-auto text-center space-y-4">
            <p class="text-slate-500 text-xs tracking-widest uppercase">Project Manager Strategic Resource ‚Ä¢ Confidential</p>
            <p class="text-slate-400 text-sm">Data aggregated from 2024-2025 EV Policy Outlooks across Latin America, Southeast Asia, and MENA.</p>
        </div>
    </footer>

    <script>
        // --- DATASET ---
        const countries = [
            {
                name: "Nepal",
                region: "SEA/South Asia",
                opps: "Tax gap is massive: 10% duty for EVs vs 250%+ for ICE. Abundant domestic hydropower makes charging the cheapest in the region. Strong govt push for clean capital city.",
                risks: "Extreme terrain tests mass-market motor/battery durability. High dependence on a single border (India) for supply parts.",
                score: 8.5,
                share: "5-8%"
            },
            {
                name: "Morocco",
                region: "MENA",
                opps: "Free registration and exemption from luxury tax. High-speed rail integration. 40%+ renewable energy mix. Proximity to EU parts market.",
                risks: "Public charging sparse outside Casablanca/Rabat highway corridor. Local consumer hesitancy on battery longevity in heat.",
                score: 7.2,
                share: "1-2%"
            },
            {
                name: "Mexico",
                region: "LATAM",
                opps: "Exemption from ISAN (New Car Tax) and 'Hoy No Circula' bans (unlimited urban uptime). Growing local assembly for Chinese brands (BYD/JAC).",
                risks: "Weak public fast-charging grid outside CDMX/Monterrey. Safety/Security of charging locations in certain hubs.",
                score: 7.0,
                share: "1%"
            },
            {
                name: "Philippines",
                region: "SEA",
                opps: "E-VDA Law provides 0% import duty on EVs. Special 'Green Lanes' for EV ride-hailing registration. Strong potential for E-Jeepney ecosystem crossover.",
                risks: "Highest electricity cost in the region. Grid fragility during typhoon seasons. Slow public charger rollout.",
                score: 6.4,
                share: "<1%"
            },
            {
                name: "Peru",
                region: "LATAM",
                opps: "Zero ISC (Select Consumption Tax). Competitive electricity rates due to hydropower. Rising fleet interest from corporate ESG clients.",
                risks: "No direct cash subsidies. Infrastructure is almost entirely private/residential. Political volatility affects policy consistency.",
                score: 5.8,
                share: "<0.5%"
            },
            {
                name: "Pakistan",
                region: "MENA/South Asia",
                opps: "EV Policy 2020-2025: 1% sales tax and 1% customs duty on parts. High fuel prices (inflation) create demand for operational savings.",
                risks: "Severe power shortfall and grid shedding. Economic crisis limits vehicle financing. Lack of 4-wheel charging standard.",
                score: 3.5,
                share: "<0.1%"
            }
        ];

        // --- RENDER TABLE ---
        const tableBody = document.getElementById('ledgerBody');
        const searchInput = document.getElementById('ledgerSearch');

        function renderLedger(data) {
            tableBody.innerHTML = '';
            data.forEach(item => {
                const colorClass = item.score >= 8 ? 'bg-emerald-100 text-emerald-800' : 
                                  item.score >= 6 ? 'bg-blue-100 text-blue-800' : 
                                  'bg-slate-100 text-slate-800';
                
                const row = `
                    <tr class="hover:bg-slate-50 transition-colors">
                        <td class="px-6 py-6 whitespace-nowrap">
                            <div class="font-bold text-slate-900">${item.name}</div>
                            <div class="text-[10px] text-slate-400 font-bold uppercase">${item.region}</div>
                        </td>
                        <td class="px-6 py-6 text-sm text-slate-600 max-w-xs leading-relaxed">
                            ${item.opps}
                        </td>
                        <td class="px-6 py-6 text-sm text-slate-500 max-w-xs leading-relaxed">
                            ${item.risks}
                        </td>
                        <td class="px-6 py-6 text-center">
                            <span class="score-indicator ${colorClass}">${item.score}</span>
                        </td>
                        <td class="px-6 py-6 text-center text-xs font-black text-slate-800">
                            ${item.share}
                        </td>
                    </tr>
                `;
                tableBody.insertAdjacentHTML('beforeend', row);
            });
        }

        renderLedger(countries);

        // --- SEARCH LOGIC ---
        searchInput.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            const filtered = countries.filter(c => 
                c.name.toLowerCase().includes(query) || 
                c.region.toLowerCase().includes(query)
            );
            renderLedger(filtered);
        });

        // --- CHART LOGIC ---
        function wrapLabel(str) {
            if (str.length <= 16) return str;
            const words = str.split(' ');
            let lines = [];
            let current = "";
            words.forEach(w => {
                if ((current + w).length > 16) {
                    lines.push(current.trim());
                    current = w + " ";
                } else {
                    current += w + " ";
                }
            });
            lines.push(current.trim());
            return lines;
        }

        const ctx = document.getElementById('marketChart').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: countries.map(c => wrapLabel(c.name)),
                datasets: [{
                    label: 'Readiness Score (1-10)',
                    data: countries.map(c => c.score),
                    backgroundColor: [
                        '#059669', // Nepal (Emerald)
                        '#2563eb', // Morocco (Blue)
                        '#0891b2', // Mexico (Cyan)
                        '#4f46e5', // Philippines (Indigo)
                        '#6366f1', // Peru (Indigo Light)
                        '#94a3b8'  // Pakistan (Slate)
                    ],
                    borderRadius: 12,
                    barThickness: 40
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(tooltipItems) {
                                const item = tooltipItems[0];
                                let label = item.chart.data.labels[item.dataIndex];
                                return Array.isArray(label) ? label.join(' ') : label;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 10,
                        grid: { color: '#f1f5f9' },
                        ticks: { stepSize: 2 }
                    },
                    x: {
                        grid: { display: false },
                        ticks: { font: { size: 10, weight: 'bold' } }
                    }
                }
            }
        });
    </script>
</body>
</html>
